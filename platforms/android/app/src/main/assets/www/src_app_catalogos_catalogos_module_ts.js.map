{"version":3,"sources":["./src/app/catalogos/catalogos-routing.module.ts","./src/app/catalogos/catalogos.module.ts","./src/app/catalogos/catalogos.page.ts","./src/environments/environment.prod.ts","./src/app/catalogos/catalogos.page.scss","./src/app/catalogos/catalogos.page.html"],"names":[],"mappings":"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","file":"src_app_catalogos_catalogos_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { CatalogosPage } from './catalogos.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CatalogosPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CatalogosPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CatalogosPageRoutingModule } from './catalogos-routing.module';\r\n\r\nimport { CatalogosPage } from './catalogos.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    CatalogosPageRoutingModule\r\n  ],\r\n  declarations: [CatalogosPage]\r\n})\r\nexport class CatalogosPageModule {}\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { environment } from '../../environments/environment.prod';\r\nimport { NavController, AlertController, LoadingController, IonList } from '@ionic/angular';\r\nimport { UsersService } from '../services/users.service';\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'app-catalogos',\r\n  templateUrl: './catalogos.page.html',\r\n  styleUrls: ['./catalogos.page.scss'],\r\n})\r\nexport class CatalogosPage implements OnInit {\r\n  @ViewChild('catalogo', {static:true}) catalogo: IonList;\r\n\r\n  url = environment.almagestUrl;\r\n  productos: any;\r\n  encabezadoProductos: any;\r\n  articulos: any;\r\n  id: any;\r\n  token: any;\r\n  tokenEliminado: any;\r\n  maximoArticulos=5;\r\n\r\n  constructor(private loadingCtrl: LoadingController,private alertCtrl: AlertController,\r\n    private usersService: UsersService, private navCtrl: NavController) { }\r\n\r\n  ngOnInit() {\r\n    this.usersService.getEncabezadoProductos()\r\n    .then(async data => {\r\n      this.encabezadoProductos = data;\r\n      this.encabezadoProductos = this.encabezadoProductos.data;\r\n    });\r\n    this.usersService.obtenerProductos().then(productos=>{\r\n      this.productos = productos;\r\n      this.productos = this.productos.data;\r\n    });\r\n  }\r\n\r\n  onLogout() {\r\n    localStorage.removeItem('token');\r\n    this.loadLogoutUser('Cerrando sesión...');\r\n  }\r\n\r\n  async formAniadirArticulo() {\r\n    this.navCtrl.navigateForward('/aniadir-producto');\r\n  }\r\n\r\n  async eliminarProducto(id: string) {\r\n    this.catalogo.closeSlidingItems();\r\n    const alert = await this.alertCtrl.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'ELIMINAR',\r\n      message: '<strong>¿Estás seguro que deseas eliminar el producto?</strong>',\r\n      buttons: [\r\n        {\r\n          text: 'NO',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: (blah) => {\r\n            this.productoNoEliminado();\r\n          }\r\n        }, {\r\n          text: 'SI',\r\n          handler: async () => {\r\n            this.usersService.removeProduct(id);\r\n            this.productoEliminado();\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  async productoNoEliminado() {\r\n    const eliminado = await this.alertCtrl.create({\r\n      header: 'Mensaje',\r\n      cssClass: 'productCss',\r\n      message: '<strong>No has eliminado este producto.</strong>',\r\n      buttons: [\r\n        {\r\n          text: 'Aceptar',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: async () => {\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await eliminado.present();\r\n  }\r\n\r\n  async productoEliminado() {\r\n    const eliminado = await this.alertCtrl.create({\r\n      header: 'Mensaje',\r\n      cssClass: 'productCss',\r\n      message: '<strong>Producto eliminado correctamente.</strong>',\r\n      buttons: [\r\n        {\r\n          text: 'Aceptar',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: async () => {\r\n            this.navCtrl.navigateForward('/usuarios/catalogos');\r\n            this.ngOnInit();\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await eliminado.present();\r\n  }\r\n\r\n  async loadLogoutUser(message: string) {\r\n    const loading = await this.loadingCtrl.create({\r\n      message,\r\n      duration: 1,\r\n    });\r\n\r\n    await loading.present();\r\n\r\n    const { role, data } = await loading.onDidDismiss();\r\n\r\n    this.navCtrl.navigateForward('/login-almagest');\r\n    this.alertLogoutUser();\r\n  }\r\n\r\n  async alertLogoutUser() {\r\n    const logout = await this.alertCtrl.create({\r\n      header: 'Logout',\r\n      cssClass: 'logoutCss',\r\n      message: '<strong>El usuario ha cerrado sesión correctamente.</strong>',\r\n      buttons: [\r\n        {\r\n          text: 'Aceptar',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: (deactived) => {\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await logout.present();\r\n  }\r\n}\r\n","export const environment = {\r\n  production: true,\r\n  almagestUrl: 'http://semillero.allsites.es/public/api'\r\n};\r\n","export default \".titulo {\\n  text-align: center;\\n  margin-right: 9.68%;\\n}\\n\\n.encabezado {\\n  text-align: center;\\n  margin-top: -5.28%;\\n  margin-bottom: -5.6%;\\n  font-size: 15px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGFsb2dvcy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBQTtFQUNBLG1CQUFBO0FBQ0o7O0FBRUE7RUFDSSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0Esb0JBQUE7RUFDQSxlQUFBO0FBQ0oiLCJmaWxlIjoiY2F0YWxvZ29zLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi50aXR1bG8ge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiA5LjY4JTtcclxufVxyXG5cclxuLmVuY2FiZXphZG8ge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgbWFyZ2luLXRvcDogLTUuMjglO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogLTUuNiU7XHJcbiAgICBmb250LXNpemU6IDE1cHg7XHJcbn0iXX0= */\";","export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"onLogout()\\\">\\r\\n          <ion-icon name=\\\"log-out-outline\\\"></ion-icon>\\r\\n          Logout\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"titulo\\\">Catálogo de productos</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"ion-padding\\\">\\r\\n  <ion-list #catalogo>\\r\\n    <ion-card class=\\\"card\\\">\\r\\n      <ion-item color=\\\"warning\\\" *ngIf=\\\"encabezadoProductos?.length === 0\\\">\\r\\n        <ion-label class=\\\"encabezado\\\">No se han encontrado productos.</ion-label>\\r\\n      </ion-item>\\r\\n      <ion-item color=\\\"tertiary\\\" *ngIf=\\\"encabezadoProductos?.length > 0\\\">\\r\\n        <ion-label class=\\\"encabezado\\\">{{ encabezadoProductos?.length }} artículos de {{ maximoArticulos }}</ion-label>\\r\\n      </ion-item>\\r\\n    </ion-card>\\r\\n        <ion-item-sliding *ngFor=\\\"let producto of productos\\\" class=\\\"sliding\\\">\\r\\n           <ion-item>\\r\\n           <ion-label>\\r\\n              <ion-label slot=\\\"start\\\">\\r\\n                  <h3><strong>Descripción: </strong>{{ producto.compamy_description }}</h3>\\r\\n                  <h3><strong>Precio: </strong>{{ producto.price }} €</h3>\\r\\n                  <h3><strong>Stock:</strong> {{ producto.stock }}</h3>\\r\\n              </ion-label>\\r\\n           </ion-label>\\r\\n          </ion-item>\\r\\n\\r\\n         <ion-item-options side=\\\"start\\\">\\r\\n            <ion-item-option (click)=\\\"eliminarProducto(producto.id)\\\" color=\\\"danger\\\">\\r\\n              <ion-icon slot=\\\"icon-only\\\" name=\\\"trash\\\"></ion-icon>\\r\\n              <ion-label>Eliminar</ion-label>\\r\\n            </ion-item-option>\\r\\n          </ion-item-options>\\r\\n        </ion-item-sliding>\\r\\n    </ion-list>\\r\\n\\r\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\"\\r\\n      (click)=\\\"formAniadirArticulo()\\\">\\r\\n      <ion-fab-button color=\\\"success\\\">\\r\\n        <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n      </ion-fab-button>\\r\\n  </ion-fab>\\r\\n</ion-content>\\r\\n\";"],"sourceRoot":"webpack:///"}