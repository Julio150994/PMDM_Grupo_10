{"version":3,"sources":["./src/app/editar-usuario/editar-usuario-routing.module.ts","./src/app/editar-usuario/editar-usuario.module.ts","./src/app/editar-usuario/editar-usuario.page.ts","./src/environments/environment.prod.ts","./src/app/editar-usuario/editar-usuario.page.scss","./src/app/editar-usuario/editar-usuario.page.html"],"names":[],"mappings":"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","file":"src_app_editar-usuario_editar-usuario_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ReactiveFormsModule} from '@angular/forms';\r\nimport { EditarUsuarioPage } from './editar-usuario.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: EditarUsuarioPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [ReactiveFormsModule,RouterModule.forChild(routes)],\r\n  exports: [RouterModule,ReactiveFormsModule],\r\n})\r\nexport class EditarUsuarioPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { EditarUsuarioPageRoutingModule } from './editar-usuario-routing.module';\r\n\r\nimport { EditarUsuarioPage } from './editar-usuario.page';\r\nimport { PipesModule } from '../pipes/pipes.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    EditarUsuarioPageRoutingModule,\r\n    ReactiveFormsModule,\r\n    PipesModule\r\n  ],\r\n  declarations: [EditarUsuarioPage]\r\n})\r\nexport class EditarUsuarioPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport { NavController, AlertController } from '@ionic/angular';\r\nimport { environment } from '../../environments/environment.prod';\r\nimport { UsersService } from '../services/users.service';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { LoadingController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-editar-usuario',\r\n  templateUrl: './editar-usuario.page.html',\r\n  styleUrls: ['./editar-usuario.page.scss'],\r\n})\r\nexport class EditarUsuarioPage implements OnInit {\r\n  url = environment.almagestUrl;\r\n  users: any;\r\n  companies: any;\r\n  user: any;\r\n  tok: any;\r\n  token: any;\r\n  form: any;\r\n  datos: any;\r\n  loading: any;\r\n\r\n  formularioEditar = new FormGroup({\r\n    id: new FormControl(''),\r\n    firstname: new FormControl('', [Validators.required, Validators.minLength(1)]),\r\n    secondname: new FormControl('', [Validators.required, Validators.minLength(1)]),\r\n    email: new FormControl('', [Validators.required, Validators.email]),\r\n    password: new FormControl('', [Validators.required, Validators.minLength(5)]),\r\n    compania: new FormControl('', [Validators.required])\r\n  });\r\n  usuario: any;\r\n\r\n  constructor(private alertContrasenia: AlertController,private loadingUserCtrl: LoadingController,private httpUser: HttpClient, private navCtrl: NavController, private usersService: UsersService) {\r\n\r\n  }\r\n\r\n  async ngOnInit() {\r\n    await this.presentLoading();\r\n    this.mostrarCompanias();\r\n    this.usuario=await this.usersService.usuario;\r\n    this.cambiarNombres();\r\n  }\r\n\r\n  async presentLoading() {\r\n\r\n    const loading = await this.loadingUserCtrl.create({\r\n      message: 'Cargando usuario...',\r\n      duration: 100\r\n    });\r\n    await loading.present();\r\n\r\n    const { role, data } = await loading.onDidDismiss();\r\n    console.log('Loading dismissed!');\r\n  }\r\n\r\n\r\n  cancelarSeleccion(evento) {\r\n    console.log('No ha seleccionado una compañía a editar '+evento);\r\n  }\r\n\r\n  cambiarNombres(){\r\n    this.formularioEditar.controls.id.setValue(this.usuario.id);\r\n    this.formularioEditar.controls.firstname.setValue(this.usuario.firstname);\r\n    this.formularioEditar.controls.secondname.setValue(this.usuario.secondname);\r\n    this.formularioEditar.controls.email.setValue(this.usuario.email);\r\n    this.formularioEditar.controls.compania.setValue(this.usuario.compania);\r\n  }\r\n\r\n  mostrarCompanias() {\r\n    this.usersService.obtenerCompanias()\r\n    .then(data => {\r\n      console.log(data);\r\n      this.companies = data;\r\n      this.companies = this.companies.data;\r\n    });\r\n  }\r\n\r\n  async editarUsuario() {\r\n    this.form = this.formularioEditar.value;\r\n    this.token = localStorage.getItem('token');\r\n\r\n    this.usersService.editar(this.token, this.form.id, this.form.firstname, this.form.secondname,\r\n      this.form.email, this.form.password, this.form.compania);\r\n      this.navCtrl.back();\r\n      this.usersService.obtenerUsuarios(localStorage.getItem('token'));\r\n      await this.presentLoading();\r\n      window.location.reload();\r\n\r\n\r\n  }\r\n}\r\n","export const environment = {\r\n  production: true,\r\n  almagestUrl: 'http://semillero.allsites.es/public/api'\r\n};\r\n","export default \".titulo {\\n  text-align: center;\\n  margin-right: 13%;\\n}\\n\\n#dato_usuario {\\n  margin-top: 2.5%;\\n  margin-bottom: 2.1%;\\n}\\n\\n#botonEditar {\\n  margin-top: 6.5%;\\n  margin-right: 2%;\\n  margin-left: 2%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVkaXRhci11c3VhcmlvLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFBO0VBQ0EsaUJBQUE7QUFDSjs7QUFFQTtFQUNJLGdCQUFBO0VBQ0EsbUJBQUE7QUFDSjs7QUFFQTtFQUNJLGdCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxlQUFBO0FBQ0oiLCJmaWxlIjoiZWRpdGFyLXVzdWFyaW8ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnRpdHVsbyB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDEzJTtcclxufVxyXG5cclxuI2RhdG9fdXN1YXJpbyB7XHJcbiAgICBtYXJnaW4tdG9wOiAyLjUlO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMi4xJTtcclxufVxyXG5cclxuI2JvdG9uRWRpdGFyIHtcclxuICAgIG1hcmdpbi10b3A6IDYuNSU7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDIlO1xyXG4gICAgbWFyZ2luLWxlZnQ6IDIlO1xyXG59Il19 */\";","export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/tabs/tab1\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title class=\\\"titulo\\\">Editar usuario</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"ion-padding\\\">\\r\\n  <form [formGroup]=\\\"formularioEditar\\\" (ngSubmit)=\\\"editarUsuario()\\\" method=\\\"post\\\">\\r\\n    <ion-input formControlName=\\\"id\\\" type=\\\"hidden\\\" disabled></ion-input>\\r\\n\\r\\n    <ion-item class=\\\"dato_usuario\\\">\\r\\n      <ion-label position=\\\"floating\\\">Nombre:</ion-label>\\r\\n      <ion-input formControlName=\\\"firstname\\\" type=\\\"text\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-label color=\\\"danger\\\" *ngIf=\\\"formularioEditar.controls.firstname.errors?.required && (formularioEditar.touched || formularioEditar.dirty)\\\">\\r\\n      * Debe introducir un nombre.\\r\\n    </ion-label>\\r\\n    <ion-label color=\\\"danger\\\" *ngIf=\\\"formularioEditar.controls.firstname.errors?.minLength && (formularioEditar.touched || formularioEditar.dirty)\\\">\\r\\n      * Su nombre debe tener al menos 3 caracteres.\\r\\n    </ion-label>\\r\\n    \\r\\n    \\r\\n    <ion-item class=\\\"dato_usuario\\\">\\r\\n      <ion-label position=\\\"floating\\\">Apellido:</ion-label>\\r\\n      <ion-input formControlName=\\\"secondname\\\" type=\\\"text\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-label color=\\\"danger\\\" *ngIf=\\\"formularioEditar.controls.secondname.errors?.required && (formularioEditar.touched || formularioEditar.dirty)\\\">\\r\\n      * Debe introducir un apellido.\\r\\n    </ion-label>\\r\\n    <ion-label color=\\\"danger\\\" *ngIf=\\\"formularioEditar.controls.secondname.errors?.minLength && (formularioEditar.touched || formularioEditar.dirty)\\\">\\r\\n      * Su apellido debe tener al menos 3 caracteres.\\r\\n    </ion-label>\\r\\n\\r\\n    <ion-item class=\\\"dato_usuario\\\">\\r\\n      <ion-label position=\\\"floating\\\">Email:</ion-label>\\r\\n      <ion-input formControlName=\\\"email\\\" type=\\\"email\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-label color=\\\"danger\\\" *ngIf=\\\"formularioEditar.controls.email.errors?.required && (formularioEditar.touched || formularioEditar.dirty)\\\">\\r\\n      * Debe introducir un email.\\r\\n    </ion-label>\\r\\n    <ion-label color=\\\"danger\\\" *ngIf=\\\"formularioEditar.controls.email.errors?.email && (formularioEditar.touched || formularioEditar.dirty)\\\">\\r\\n      * El email no es válido.\\r\\n    </ion-label>\\r\\n\\r\\n    <ion-item class=\\\"dato_usuario\\\">\\r\\n      <ion-label position=\\\"floating\\\">Contraseña:</ion-label>\\r\\n      <ion-input formControlName=\\\"password\\\" type=\\\"password\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-label color=\\\"danger\\\" *ngIf=\\\"formularioEditar.controls.password.errors?.required && (formularioEditar.touched || formularioEditar.dirty)\\\">\\r\\n      * Debe introducir una contraseña.\\r\\n    </ion-label>\\r\\n    <ion-label color=\\\"danger\\\" *ngIf=\\\"formularioEditar.controls.password.errors?.minLength && (formularioEditar.touched || formularioEditar.dirty)\\\">\\r\\n      * La contraseña debe tener al menos 5 caracteres.\\r\\n    </ion-label>\\r\\n\\r\\n   <ion-item class=\\\"dato_usuario\\\">\\r\\n      <ion-label>Nombre de Compañía:</ion-label>\\r\\n      <ion-select formControlName=\\\"compania\\\" value=\\\"brown\\\" okText=\\\"Seleccionar\\\" cancelText=\\\"Cancelar\\\" (ionCancel)=\\\"cancelarSeleccion($event)\\\">\\r\\n        <ion-select-option *ngFor=\\\"let company of companies | ordenar:'id'\\\" value=\\\"{{ company.id }}\\\">\\r\\n          {{company.name }}\\r\\n        </ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n    <ion-label color=\\\"danger\\\" *ngIf=\\\"formularioEditar.controls.compania.errors?.required && (formularioEditar.touched || formularioEditar.dirty)\\\">\\r\\n      * Seleccione un nombre de compañía.\\r\\n    </ion-label>\\r\\n\\r\\n    <ion-button expand=\\\"full\\\" type=\\\"submit\\\" [disabled]=\\\"!formularioEditar.valid\\\" id=\\\"botonRegister\\\" color=\\\"tertiary\\\" id=\\\"botonEditar\\\">\\r\\n      <ion-icon name=\\\"person\\\"></ion-icon>\\r\\n      Editar\\r\\n    </ion-button>\\r\\n  </form>\\r\\n</ion-content>\";"],"sourceRoot":"webpack:///"}